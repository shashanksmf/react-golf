{"version":3,"sources":["containers/Box/config.js","containers/Box/helperfunc.js","containers/Box/GridLayout.js"],"names":["layoutConfig","className","autoSize","verticalCompact","cols","lg","md","sm","xs","xxs","breakpoints","draggableHandle","isResizable","rowHeight","margin","gutter","indexOfBoxfunc","allBox","uid","boxIndex","forEach","box","index","toString","deleteBox","boxActions","saveBox","ResponsiveReactGridLayout","WidthProvider","Responsive","GridLayout","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onLayoutChange","bind","assertThisInitialized","breakPointChange","autoHeight","state","breakpoint","setState","nextProps","reload","layouts","_this2","layout","i","x","y","h","w","size","newBreakpoint","height","_ref","_this$state","self","map","singleBox","indexOfBox","Math","ceil","setTimeout","_this3","Layouts","mdLayouts","lgLayouts","smLayouts","xsLayouts","xxsLayouts","push","objectSpread","parseInt","generateLayoutfunc","boxSettings","onDragStop","onResizeStop","onBreakpointChange","react_default","a","createElement","key","lib","debounceTimeout","onResize","data","style","paddingRight","concat","paddingBottom","title","onClick","icon","type","content","reactComponent","Component","connect","Box"],"mappings":"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","file":"static/js/50.c1360a3b.chunk.js","sourcesContent":["const layoutConfig = {\r\n  className: 'isoCardBoxLayout',\r\n  autoSize: true,\r\n  verticalCompact: true,\r\n  cols: { lg: 96, md: 96, sm: 96, xs: 96, xxs: 96 },\r\n  breakpoints: { lg: 1200, md: 996, sm: 768, xs: 480, xxs: 200 },\r\n  draggableHandle: '.isoDragBox',\r\n  isResizable: true,\r\n  rowHeight: 1,\r\n  margin: [0, 0],\r\n};\r\n\r\nconst gutter = {\r\n  gutterWidth: 10,\r\n  gutterHeight: 10,\r\n};\r\nexport { layoutConfig, gutter };\r\n","const generateLayoutfunc = allBox => {\r\n  const mdLayouts = [];\r\n  const lgLayouts = [];\r\n  const smLayouts = [];\r\n  const xsLayouts = [];\r\n  const xxsLayouts = [];\r\n  allBox.forEach(box => {\r\n    mdLayouts.push({\r\n      ...box,\r\n      x: parseInt(box.size.md.x, 10),\r\n      y: parseInt(box.size.md.y, 10),\r\n      h: parseInt(box.size.md.h, 10),\r\n      w: parseInt(box.size.md.w, 10),\r\n      i: box.size.md.i.toString(),\r\n    });\r\n    lgLayouts.push({\r\n      ...box,\r\n      x: parseInt(box.size.lg.x, 10),\r\n      y: parseInt(box.size.lg.y, 10),\r\n      h: parseInt(box.size.lg.h, 10),\r\n      w: parseInt(box.size.lg.w, 10),\r\n      i: box.size.lg.i.toString(),\r\n    });\r\n    smLayouts.push({\r\n      ...box,\r\n      x: parseInt(box.size.sm.x, 10),\r\n      y: parseInt(box.size.sm.y, 10),\r\n      h: parseInt(box.size.sm.h, 10),\r\n      w: parseInt(box.size.sm.w, 10),\r\n      i: box.size.sm.i.toString(),\r\n    });\r\n    xsLayouts.push({\r\n      ...box,\r\n      x: parseInt(box.size.xs.x, 10),\r\n      y: parseInt(box.size.xs.y, 10),\r\n      h: parseInt(box.size.xs.h, 10),\r\n      w: parseInt(box.size.xs.w, 10),\r\n      i: box.size.xs.i.toString(),\r\n    });\r\n    xxsLayouts.push({\r\n      ...box,\r\n      x: parseInt(box.size.xxs.x, 10),\r\n      y: parseInt(box.size.xxs.y, 10),\r\n      h: parseInt(box.size.xxs.h, 10),\r\n      w: parseInt(box.size.xxs.w, 10),\r\n      i: box.size.xxs.i.toString(),\r\n    });\r\n  });\r\n  return {\r\n    md: mdLayouts,\r\n    lg: lgLayouts,\r\n    sm: smLayouts,\r\n    xs: xsLayouts,\r\n    xxs: xxsLayouts,\r\n  };\r\n};\r\n\r\nconst indexOfBoxfunc = (allBox, uid) => {\r\n  let boxIndex = -1;\r\n  allBox.forEach((box, index) => {\r\n    if (box.uid.toString() === uid.toString()) {\r\n      boxIndex = index;\r\n    }\r\n  });\r\n  return boxIndex;\r\n};\r\n\r\nexport { generateLayoutfunc, indexOfBoxfunc };\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Responsive, WidthProvider } from 'react-grid-layout';\r\nimport { ReactElementResize } from 'react-element-resize';\r\nimport { Icon } from 'antd';\r\nimport boxActions from '../../redux/box/actions';\r\nimport { layoutConfig, gutter } from './config';\r\nimport { generateLayoutfunc, indexOfBoxfunc } from './helperfunc.js';\r\nimport 'react-grid-layout/css/styles.css';\r\nimport 'react-resizable/css/styles.css';\r\nimport './box.css';\r\n\r\nconst { deleteBox, saveBox } = boxActions;\r\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\r\n\r\nclass GridLayout extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onLayoutChange = this.onLayoutChange.bind(this);\r\n    this.breakPointChange = this.breakPointChange.bind(this);\r\n    this.autoHeight = this.autoHeight.bind(this);\r\n    this.state = {\r\n      breakpoint: 'lg'\r\n    };\r\n  }\r\n  componentWillMount() {\r\n    this.setState({ allBox: this.props.allBox });\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.reload) {\r\n      this.setState({ allBox: nextProps.allBox });\r\n    }\r\n  }\r\n  onLayoutChange(layouts) {\r\n    const { allBox } = this.state;\r\n    layouts.forEach(layout => {\r\n      const boxIndex = indexOfBoxfunc(allBox, layout.i);\r\n      if (boxIndex !== -1) {\r\n        const { x, y, h, w, i } = layout;\r\n        allBox[boxIndex].size[this.state.breakpoint] = { x, y, h, w, i };\r\n      }\r\n    });\r\n    this.setState({ allBox });\r\n    this.props.saveBox(allBox);\r\n  }\r\n  breakPointChange(newBreakpoint) {\r\n    // this.breakpoint = newBreakpoint;\r\n    this.setState({ breakpoint: newBreakpoint });\r\n    // Device type can be accesssed from this.breakpoint variable\r\n  }\r\n  autoHeight(uid, { height }) {\r\n    const { allBox, breakpoint } = this.state;\r\n    const self = this;\r\n    if (height === 0) {\r\n      return;\r\n    }\r\n    allBox.map(singleBox => {\r\n      const indexOfBox = indexOfBoxfunc(allBox, uid);\r\n      if (\r\n        allBox[indexOfBox].size[breakpoint].h !==\r\n        Math.ceil(height / layoutConfig.rowHeight)\r\n      ) {\r\n        allBox[indexOfBox].size[breakpoint].h = Math.ceil(\r\n          height / layoutConfig.rowHeight\r\n        );\r\n      }\r\n      return null;\r\n    });\r\n    setTimeout(() => {\r\n      self.setState({ allBox });\r\n    }, 1);\r\n  }\r\n  render() {\r\n    const { allBox } = this.state;\r\n    const { deleteBox } = this.props;\r\n    const Layouts = generateLayoutfunc(allBox);\r\n    const renderBox = singleBox => {\r\n      return (\r\n        <div className=\"isomorphicSingleCardHolder\" key={singleBox.i}>\r\n          <ReactElementResize\r\n            debounceTimeout={200}\r\n            onResize={data => {\r\n              this.autoHeight(singleBox.i, data);\r\n            }}\r\n          >\r\n            {data => (\r\n              <div\r\n                className=\"isomorphicSingleCard\"\r\n                style={{\r\n                  paddingRight: `${Math.ceil(gutter.gutterWidth)}px`,\r\n                  paddingBottom: `${Math.ceil(gutter.gutterHeight)}px`\r\n                }}\r\n              >\r\n                <div className=\"isoCardBox\">\r\n                  <div className=\"isoCardBoxHeader\">\r\n                    <h3>{singleBox.title}</h3>\r\n\r\n                    <div className=\"isoCardControl\">\r\n                      <button\r\n                        className=\"isoDeleteBtn\"\r\n                        onClick={() => deleteBox(singleBox.i)}\r\n                      >\r\n                        <Icon type=\"delete\" />\r\n                      </button>\r\n                      <button className=\"isoDragBox\" type=\"button\">\r\n                        <Icon type=\"swap\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"isoCardBoxBody\">\r\n                    <p>{singleBox.content}</p>\r\n                    {singleBox.reactComponent ? (\r\n                      <singleBox.reactComponent />\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </ReactElementResize>\r\n        </div>\r\n      );\r\n    };\r\n    const boxSettings = {\r\n      ...layoutConfig,\r\n      layouts: Layouts,\r\n      onDragStop: this.onLayoutChange,\r\n      onResizeStop: this.onLayoutChange,\r\n      onBreakpointChange: this.breakPointChange\r\n    };\r\n    return (\r\n      <div className=\"isoCardBoxContentWrapper\">\r\n        <ResponsiveReactGridLayout {...boxSettings}>\r\n          {Layouts.md.map(renderBox)}\r\n        </ResponsiveReactGridLayout>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    allBox: state.Box.allBox,\r\n    reload: state.Box.reload\r\n  };\r\n}\r\nexport default connect(mapStateToProps, {\r\n  saveBox,\r\n  deleteBox\r\n})(GridLayout);\r\n"],"sourceRoot":""}